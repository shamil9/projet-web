{% extends 'base.html.twig' %}
{% block title %}{{ user.name }}{% endblock %}

{% block body %}
<div class="container">
    <div class="row">
        <div class="col-lg-12 pro-slider">
            <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
                <!-- Indicators -->
                <ol class="carousel-indicators">
                    <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
                    <li data-target="#carousel-example-generic" data-slide-to="1"></li>
                </ol>

                <!-- Wrapper for slides -->
                <div class="carousel-inner" role="listbox">
                    <div class="item active">
                        <img src="{{ asset('assets/img/slider/1.jpg') }}"
                             alt="">
                        <div class="carousel-caption">
                            <h1>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Repellat, voluptate.</h1>
                        </div>
                    </div>
                    <div class="item">
                        <img src="{{ asset('assets/img/slider/2.jpg') }}"
                             alt="">
                        <div class="carousel-caption">
                            <h1>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Iure, unde!</h1>
                        </div>
                    </div>

                    <!-- Controls -->
                    <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
                        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
                        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            </div>
            <div class="pro_userbar col-lg-12">
                <div class="pro_avatar pull-left">
                    <img src="{{ asset('assets/img/icons/user.svg') }}" alt="Avatar" class="pro_avatar--size thumbnail">
                </div>
                <span class="pro_user-info">{{ user.name }}</span>
                <span class="pull-right">
                    <a href="#"><img class="pro_social-icons" src="{{ asset('assets/img/icons/twitter.svg') }}" alt=""></a>
                    <a href="#"><img class="pro_social-icons" src="{{ asset('assets/img/icons/facebook.svg') }}" alt=""></a>
                </span>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12">
            <div class="pro-tabs">
                <div>

                    <!-- Nav tabs -->
                    <ul class="nav nav-tabs" role="tablist">
                        <li role="presentation" class="active">
                            <a href="#categories" aria-controls="categories" role="tab" data-toggle="tab">Catégories</a>
                        </li>
                        <li role="presentation">
                            <a href="#stages" aria-controls="stages" role="tab" data-toggle="tab">Stages</a>
                        </li>
                        <li role="presentation">
                            <a href="#promotions" aria-controls="promotions" role="tab" data-toggle="tab">Promotions</a>
                        </li>
                        <li role="presentation">
                            <a href="#commentaires" aria-controls="commentaires" role="tab" data-toggle="tab">Commentaires</a>
                        </li>
                        <li role="presentation">
                            <a href="#localisation" aria-controls="localisation" role="tab" data-toggle="tab">Localisation</a>
                        </li>
                    </ul>

                    <!-- Tab panes -->
                    <div class="tab-content">
                        <div role="tabpanel" class="tab-pane active" id="categories">
                            <h1>Catégories</h1>
                            {% for cat in user.categories %}
                                <ul>
                                    <li>
                                        <h3>{{ cat.name }}</h3>
                                        {{ cat.description }}
                                    </li>
                                </ul>
                            {% endfor %}
                        </div>
                        <div role="tabpanel" class="tab-pane" id="stages">
                            <h1>Stages</h1>
                        </div>
                        <div role="tabpanel" class="tab-pane" id="promotions">
                            <h1>Promotions</h1>
                        </div>
                        <div role="tabpanel" class="tab-pane" id="commentaires">
                            <h1>Commentaires</h1>
                        </div>
                        <div role="tabpanel" class="tab-pane" id="localisation">
                            <h1>Localisation</h1>
                        </div>
                    </div>

                </div>
            </div> <!-- tabs end -->

            <div class="row">
                <div class="col-lg-12">
                    <h3>Prestataires similaires</h3>
                    <div id="suggestions">
                        <img class="center-block" src="{{ asset('assets/img/icons/infinity.gif') }}" width="100px" alt="">
                    </div>
                </div>
            </div> <!-- suggestion end -->
        </div>
    </div>
</div>
{% endblock %}
{% block javascripts %}
    {#TODO Déplacer dans un fichier JS#}
    <script>
        $.getJSON('{{ path("pro_users_suggestions", {'user': user.id}) }}', function (data) {
            if (data.length < 1)
                    return showSuggestions('<h3 class="text-center">Aucun résultat trouvé</h3>');
            var html = '';
            for (var key in data) {
                html += "<div class='col-lg-3'>" +
                            "<a href='" + data[key].id + "' class='thumbnail'>" +
                                "<img class='pro_avatar--size' src='data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTcxIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDE3MSAxODAiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPjwhLS0KU291cmNlIFVSTDogaG9sZGVyLmpzLzEwMCV4MTgwCkNyZWF0ZWQgd2l0aCBIb2xkZXIuanMgMi42LjAuCkxlYXJuIG1vcmUgYXQgaHR0cDovL2hvbGRlcmpzLmNvbQooYykgMjAxMi0yMDE1IEl2YW4gTWFsb3BpbnNreSAtIGh0dHA6Ly9pbXNreS5jbwotLT48ZGVmcz48c3R5bGUgdHlwZT0idGV4dC9jc3MiPjwhW0NEQVRBWyNob2xkZXJfMTU3M2VhYjVjNTUgdGV4dCB7IGZpbGw6I0FBQUFBQTtmb250LXdlaWdodDpib2xkO2ZvbnQtZmFtaWx5OkFyaWFsLCBIZWx2ZXRpY2EsIE9wZW4gU2Fucywgc2Fucy1zZXJpZiwgbW9ub3NwYWNlO2ZvbnQtc2l6ZToxMHB0IH0gXV0+PC9zdHlsZT48L2RlZnM+PGcgaWQ9ImhvbGRlcl8xNTczZWFiNWM1NSI+PHJlY3Qgd2lkdGg9IjE3MSIgaGVpZ2h0PSIxODAiIGZpbGw9IiNFRUVFRUUiLz48Zz48dGV4dCB4PSI1OS41NTQ2ODc1IiB5PSI5NC41Ij4xNzF4MTgwPC90ZXh0PjwvZz48L2c+PC9zdmc+'>" +
                            "<h4 class='text-center'>" + data[key].name + "</h4>" +
                            "</a>" +
                        "</div>";
            }
            function showSuggestions(html) {
                setTimeout(function () {
                    $('#suggestions').html(html);
                }, 2000);
            }
            showSuggestions(html);
        });
    </script>
{% endblock %}
